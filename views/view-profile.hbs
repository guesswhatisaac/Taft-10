
<div class = "contents-container">
    
    <div lcass = "profile-container">
        <div class = "user-container">
            <div class = "user-profile">
                <div class = "icon-container">
                    <img src = {{currentUserPic}} alt = "Doggo Logo" class = "user-image">
                </div>
                
                <div class = "user-name">
                    {{{myName}}}
                    {{#if isOwner}}
                    <p> (Establishment Owner) </p>

                    <!-- NATHAN EDIT: Add crud button operations here -->

                    <div class="crud-container">
                        <div class="button-group">
                            <button class="crud-button" id="create-button">Create</button>
                            <button class="crud-button" id="update-button">Update</button> 
                            <button class="crud-button" id="delete-button">Delete</button>
                        </div>
                    </div>

                    <div class="modal" id="create-modal">

                            <div class="modal-content">

                                <div class="title-container">
                                    <div class="crud-title">
                                        <span class="yellow">CREATE</span> 
                                        <span class="white">ESTABLISHMENT</span> 
                                    </div>
                            
                                    <div class="close-button">
                                        <img src="../assets/est/content-icons/close-white.png" alt="Close" class="close-icon">
                                    </div>
                                </div>
                            
                                <div class="create-error-message"></div>
                            
                                <form class="create-establishment-form" method="post" action="/">
                                    <label for="est-name-input">Establishment Title</label><br>
                                    <input type="text" id="est-name-input" name="est-name" required><br>
                                    <label for="price-range">Price Range (Low to High)</label><br>
                                    <input type="range" id="price-range-input" min="1" max="4" value="0" step="1" required> <br>
                                    <label for="tags">Tags (Separate by commas)</label><br>
                                    <input type="text" id="tags-input" placeholder="Enter comma-separated tags (e.g., restaurant, Italian)"><br>
                                    <label for="description">Establishment Description</label><br>
                                    <textarea id="description-input" placeholder="Write a detailed description of the establishment"></textarea><br>
                                    <label for="cover-image">Cover Image</label><br>
                                    <input type="file" id="cover-image-input" accept="image/*" required><br><br>
                                    <h1 id="userTag" hidden> {{userTag}} </h1> <!--to obtain owner name creating the establishment-->

                                    
                                    <button type="submit" id="submit-create-establishment">Create</button> 
                                </form>
                            
                            </div>
                    </div>

                    <!--
                        /********************** UPDATE **********************/ 
                    -->

                        <div class="modal" id="update-modal">
                        <div class="modal-content">

                            <div class="title-container">
                                <div class="crud-title">
                                <span class="yellow">UPDATE</span> 
                                <span class="white">ESTABLISHMENT</span> 
                                </div>
                    
                                <div class="close-button">
                                <img src="../assets/est/content-icons/close-white.png" alt="Close" class="close-icon">
                                </div>
                            </div>
                    
                            <div class="update-error-message"></div>

                            <form class="update-establishment-form">

                                <label for="establishment-select">Select Establishment to Update:</label><br>
                                <select value="{{_id}}" id="establishment-select" name="establishment-id" required>

                                    {{#each ownerEstablishments}}
                                        {{#each this}}
                                            {{#if this.name}}
                                                <option value=""> {{this.name}} </option>
                                            {{/if}}
                                        {{/each}}
                                    {{/each}}
                                </select><br>

                                <label for="update-est-name">Establishment Title</label><br>
                                <input type="text" id="update-est-name" name="est-name" required><br>
                                <label for="update-price-range">Price Range (Low to High)</label><br>
                                <input type="range" id="update-price-range" min="1" max="4" value="0" step="1" required> <br>
                                <label for="update-tags">Tags (Separate by commas)</label><br>
                                <input type="text" id="update-tags" placeholder="Enter comma-separated tags (e.g., restaurant, Italian)"><br>
                                <label for="update-description">Establishment Description</label><br>
                                <textarea id="update-description" placeholder="Write a detailed description of the establishment"></textarea><br>
                                <label for="update-cover-image">Cover Image</label><br>
                                <input type="file" id="update-cover-image" accept="image/*" required><br><br>

                                <button type="submit" id="submit-update-establishment">UPDATE</button> 
                            </form>
                            
                        </div>
                        </div>

                    <!--
                        /********************** DELETE **********************/ 
                    -->

                        <div class="modal" id="delete-modal"> 
                            <div class="modal-content">

                                <div class="title-container">
                                    <div class="crud-title">
                                    <span class="yellow">DELETE</span> 
                                    <span class="white">ESTABLISHMENT</span> 
                                    </div>
                        
                                    <div class="close-button">
                                    <img src="../assets/est/content-icons/close-white.png" alt="Close" class="close-icon">
                                    </div>
                                </div>
                        
                                <div class="delete-error-message"></div>

                            </div>
                        
                        </div>

                    {{else}}
                    <p> (Non-owner User)  </p>
                    {{/if}}
                </div>

                <div class = "user">
                    <h2 id="user-handle"> {{currUsername}} </h2>
                
                    <p> {{numReviews}} </p>
                </div>

                <div class = "description">
                    <p id="user-description"> {{userDescription}} </p>
                </div>

                <a href="/edit">
                    <button class = "btn">
                        Edit Profile
                    </button>
                </a>
            </div>

        </div>
    </div>

    
    <!--TODO: LINK THIS TO SHEYN AND ISAAC'S ADD REVIEW -->
    <div class = "user-more-info-container">
        
        <div class = "review-label">
            <h1> Reviews </h1>
        </div>

        <div class = "scrollbar-container">
            <div class = "scroll-object">
                <div class = "reviews-container">
                    <!--review 1 -->
                    <div class = "review">
                        <div class="review-display">
                            <div class="profile-display">&nbsp;</div>
                            <div class="reviewer-display">
                                <div id="name-display"> Yasmin Asistido </div>
                                <div id="label-display"> De La Salle University Student </div>
                                <div class="rating-and-date"> 
                                    <div id="rating-display"> 4.8 ★ </div>
                                    <div id="dot-display">•</div>
                                    <div id="date-display"> January 20, 2024 </div>
                                </div>
                            </div>
                            <div class="upvote-container">
                                <div class="upvote-display">&nbsp;</div>
                                <div class="upvote-count-display"> 78 </div>
                            </div>
                        </div>
                        <div id="review-text-display"> Ate Rica's Bacsilog lives up to its "Sauce Sarap" promise! Delicious, affordable Filipino comfort food with generous portions and friendly service. Perfect for a quick and satisfying breakfast or lunch.</div>
                    </div>
                    <!-- review 2 -->
                    <div class = "review">
                        <div class="review-display">
                            <div class="profile-display">&nbsp;</div>
                            <div class="reviewer-display">
                                <div id="name-display"> Yasmin Asistido </div>
                                <div id="label-display"> De La Salle University Student </div>
                                <div class="rating-and-date"> 
                                    <div id="rating-display"> 4.0 ★ </div>
                                    <div id="dot-display">•</div>
                                    <div id="date-display"> December 3, 2023 </div>
                                </div>
                            </div>
                            <div class="upvote-container">
                                <div class="upvote-display">&nbsp;</div>
                                <div class="upvote-count-display"> 31 </div>
                            </div>
                        </div>
                        <div id="review-text-display"> Dive into a delightful journey of authentic Korean flavors at Nabi Mart. From the first bite to the last, each dish bursts with the rich umami taste that defines Korean cuisine. Whether you're a bibimbap buff or a kimchi connoisseur, Nabi Mart offers a menu that caters to every palate and craving.  </div>
                    </div>
                    <!-- review 3 -->
                    <div class = "review">
                        <div class="review-display">
                            <div class="profile-display">&nbsp;</div>
                            <div class="reviewer-display">
                                <div id="name-display"> Yasmin Asistido </div>
                                <div id="label-display"> De La Salle University Student </div>
                                <div class="rating-and-date"> 
                                    <div id="rating-display"> 5.0 ★ </div>
                                    <div id="dot-display">•</div>
                                    <div id="date-display"> August 15, 2023 </div>
                                </div>
                            </div>
                            <div class="upvote-container">
                                <div class="upvote-display">&nbsp;</div>
                                <div class="upvote-count-display"> 60 </div>
                            </div>
                        </div>
                        <div id="review-text-display"> Whether you're craving classic fried chicken, tangy Korean-style wings, or something in between, 24 Chicken has you covered. The generous portions ensure you'll leave satisfied without breaking the bank. If you're in Taft and seeking chicken, look no further than 24 Chicken! </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

</div>